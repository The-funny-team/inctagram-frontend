(self.webpackChunkinctagram=self.webpackChunkinctagram||[]).push([[9796],{"./src/widgets/AddProfilePhoto/ui/AddProfilePhoto.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,default:()=>AddProfilePhoto_stories});var defineProperty=__webpack_require__("./node_modules/.pnpm/@babel+runtime@7.23.2/node_modules/@babel/runtime/helpers/esm/defineProperty.js"),react=__webpack_require__("./node_modules/.pnpm/next@14.0.1_@babel+core@7.23.3_react-dom@18.2.0_react@18.2.0_sass@1.69.5/node_modules/next/dist/compiled/react/index.js"),DeleteIcon=__webpack_require__("./src/shared/assets/icons/DeleteIcon.tsx"),hooks=__webpack_require__("./src/shared/lib/hooks/index.ts"),ui=__webpack_require__("./src/shared/ui/index.ts"),injectStylesIntoStyleTag=__webpack_require__("./node_modules/.pnpm/style-loader@3.3.3_webpack@5.89.0/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),styleDomAPI=__webpack_require__("./node_modules/.pnpm/style-loader@3.3.3_webpack@5.89.0/node_modules/style-loader/dist/runtime/styleDomAPI.js"),styleDomAPI_default=__webpack_require__.n(styleDomAPI),insertBySelector=__webpack_require__("./node_modules/.pnpm/style-loader@3.3.3_webpack@5.89.0/node_modules/style-loader/dist/runtime/insertBySelector.js"),insertBySelector_default=__webpack_require__.n(insertBySelector),setAttributesWithoutAttributes=__webpack_require__("./node_modules/.pnpm/style-loader@3.3.3_webpack@5.89.0/node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),setAttributesWithoutAttributes_default=__webpack_require__.n(setAttributesWithoutAttributes),insertStyleElement=__webpack_require__("./node_modules/.pnpm/style-loader@3.3.3_webpack@5.89.0/node_modules/style-loader/dist/runtime/insertStyleElement.js"),insertStyleElement_default=__webpack_require__.n(insertStyleElement),styleTagTransform=__webpack_require__("./node_modules/.pnpm/style-loader@3.3.3_webpack@5.89.0/node_modules/style-loader/dist/runtime/styleTagTransform.js"),styleTagTransform_default=__webpack_require__.n(styleTagTransform),AddProfilePhoto_module=__webpack_require__("./node_modules/.pnpm/css-loader@6.8.1_webpack@5.89.0/node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[13].use[1]!./node_modules/.pnpm/postcss-loader@7.3.3_postcss@8.4.31_typescript@5.0.2_webpack@5.89.0/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/resolve-url-loader@5.0.0/node_modules/resolve-url-loader/index.js!./node_modules/.pnpm/sass-loader@12.6.0_sass@1.69.5_webpack@5.89.0/node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[13].use[4]!./src/widgets/AddProfilePhoto/ui/AddProfilePhoto.module.scss"),options={};options.styleTagTransform=styleTagTransform_default(),options.setAttributes=setAttributesWithoutAttributes_default(),options.insert=insertBySelector_default().bind(null,"head"),options.domAPI=styleDomAPI_default(),options.insertStyleElement=insertStyleElement_default();injectStylesIntoStyleTag_default()(AddProfilePhoto_module.Z,options);const ui_AddProfilePhoto_module=AddProfilePhoto_module.Z&&AddProfilePhoto_module.Z.locals?AddProfilePhoto_module.Z.locals:void 0;var slicedToArray=__webpack_require__("./node_modules/.pnpm/@babel+runtime@7.23.2/node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),dist=__webpack_require__("./node_modules/.pnpm/react-avatar-editor@13.0.2_@babel+core@7.23.3_react-dom@18.2.0_react@18.2.0/node_modules/react-avatar-editor/dist/index.js"),dist_default=__webpack_require__.n(dist),react_toastify_esm=__webpack_require__("./node_modules/.pnpm/react-toastify@9.1.3_react-dom@18.2.0_react@18.2.0/node_modules/react-toastify/dist/react-toastify.esm.mjs"),profileApi=__webpack_require__("./src/shared/api/profileApi/index.ts"),shared_const=__webpack_require__("./src/shared/const/index.ts"),helpers=__webpack_require__("./src/shared/lib/helpers/index.ts"),clsx=__webpack_require__("./node_modules/.pnpm/clsx@2.0.0/node_modules/clsx/dist/clsx.mjs"),AddProfilePhotoModal_module=__webpack_require__("./node_modules/.pnpm/css-loader@6.8.1_webpack@5.89.0/node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[13].use[1]!./node_modules/.pnpm/postcss-loader@7.3.3_postcss@8.4.31_typescript@5.0.2_webpack@5.89.0/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/resolve-url-loader@5.0.0/node_modules/resolve-url-loader/index.js!./node_modules/.pnpm/sass-loader@12.6.0_sass@1.69.5_webpack@5.89.0/node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[13].use[4]!./src/widgets/AddProfilePhoto/ui/AddProfilePhotoModal/AddProfilePhotoModal.module.scss"),AddProfilePhotoModal_module_options={};AddProfilePhotoModal_module_options.styleTagTransform=styleTagTransform_default(),AddProfilePhotoModal_module_options.setAttributes=setAttributesWithoutAttributes_default(),AddProfilePhotoModal_module_options.insert=insertBySelector_default().bind(null,"head"),AddProfilePhotoModal_module_options.domAPI=styleDomAPI_default(),AddProfilePhotoModal_module_options.insertStyleElement=insertStyleElement_default();injectStylesIntoStyleTag_default()(AddProfilePhotoModal_module.Z,AddProfilePhotoModal_module_options);const AddProfilePhotoModal_AddProfilePhotoModal_module=AddProfilePhotoModal_module.Z&&AddProfilePhotoModal_module.Z.locals?AddProfilePhotoModal_module.Z.locals:void 0;var __jsx=react.createElement,AddProfilePhotoModal=function AddProfilePhotoModal(_ref){var currentPhoto=_ref.currentPhoto,error=_ref.error,isOpenAddPhotoModal=_ref.isOpenAddPhotoModal,setCurrentPhoto=_ref.setCurrentPhoto,setError=_ref.setError,setIsOpenAddPhotoModal=_ref.setIsOpenAddPhotoModal,text=_ref.text,editorRef=(0,react.useRef)(null),inputRef=(0,react.useRef)(null),_useUpdateAvatarMutat=(0,profileApi.C0)(),updateAvatar=(0,slicedToArray.Z)(_useUpdateAvatarMutat,1)[0],t=text.pages.profile.addProfilePhoto,tValidation=text.validation;return __jsx(ui.u_,{className:AddProfilePhotoModal_AddProfilePhotoModal_module.addModalRoot,isOpen:isOpenAddPhotoModal,onIsOpenChange:setIsOpenAddPhotoModal,title:t.addPhoto},__jsx("div",{className:AddProfilePhotoModal_AddProfilePhotoModal_module.modalContent},currentPhoto?__jsx(react.Fragment,null,__jsx(dist_default(),{border:8,borderRadius:158,color:[23,23,23,.8],height:316,image:currentPhoto,ref:editorRef,rotate:0,scale:1.2,width:316}),__jsx(ui.zx,{className:AddProfilePhotoModal_AddProfilePhotoModal_module.saveButton,fullWidth:!1,onClick:function savePhoto(){if(editorRef.current){var canvasScaled=editorRef.current.getImageScaledToCanvas();canvasScaled&&canvasScaled.toBlob((function(blob){if(blob){var timestamp=Date.now(),fileName="photo_".concat(timestamp,".png"),file=new File([blob],fileName,{type:"image/png"});updateAvatar({file}).unwrap().then((function(){setCurrentPhoto(null),setIsOpenAddPhotoModal(!1)})).catch((function(error){(0,helpers.fn)(error)&&react_toastify_esm.Am.error(error.data.message)}))}else react_toastify_esm.Am.error("Select a photo")}),"image/png")}},variant:"primary"},t.savePhoto)):__jsx("div",{className:AddProfilePhotoModal_AddProfilePhotoModal_module.withoutPhoto},error&&__jsx("div",{className:AddProfilePhotoModal_AddProfilePhotoModal_module.errorText},__jsx(ui.cC,{tags:{1:function _(){return __jsx(ui.ZT,{as:"span",variant:"boldText14"},t.errorText.error)},2:function _(){return __jsx(ui.ZT,{as:"span",variant:"regularText14"},t.errorText.getDescription(error))}},text:t.errorText.description})),__jsx(ui.zA,{className:(0,clsx.W)(AddProfilePhotoModal_AddProfilePhotoModal_module.blank,error&&AddProfilePhotoModal_AddProfilePhotoModal_module.blankError),type:"square"}),__jsx(ui.zx,{fullWidth:!1,onClick:function selectPhoto(){var _inputRef$current;inputRef&&(null===(_inputRef$current=inputRef.current)||void 0===_inputRef$current||_inputRef$current.click())},variant:"primary"},t.selectPhoto)),__jsx("input",{accept:"*/image, .png, .img, .jpg",onChange:function changePhotoHandler(e){if(e.preventDefault(),e.target.files&&e.target.files.length>0){var file=e.target.files[0];file.size>shared_const.Tb?(setError(tValidation.sizeError),e.target.value=""):"image/jpeg"!==file.type&&"image/png"!==file.type?(setError(tValidation.typeError),e.target.value=""):setCurrentPhoto(file)}},ref:inputRef,style:{display:"none"},type:"file"})))};AddProfilePhotoModal.displayName="AddProfilePhotoModal",AddProfilePhotoModal.__docgenInfo={description:"",methods:[],displayName:"AddProfilePhotoModal",props:{currentPhoto:{required:!0,tsType:{name:"union",raw:"File | null",elements:[{name:"File"},{name:"null"}]},description:""},error:{required:!0,tsType:{name:"string"},description:""},isOpenAddPhotoModal:{required:!0,tsType:{name:"boolean"},description:""},setCurrentPhoto:{required:!0,tsType:{name:"signature",type:"function",raw:"(currentPhoto: File | null) => void",signature:{arguments:[{name:"currentPhoto",type:{name:"union",raw:"File | null",elements:[{name:"File"},{name:"null"}]}}],return:{name:"void"}}},description:""},setError:{required:!0,tsType:{name:"signature",type:"function",raw:"(error: string) => void",signature:{arguments:[{name:"error",type:{name:"string"}}],return:{name:"void"}}},description:""},setIsOpenAddPhotoModal:{required:!0,tsType:{name:"signature",type:"function",raw:"(isOpenAddPhotoModal: boolean) => void",signature:{arguments:[{name:"isOpenAddPhotoModal",type:{name:"boolean"}}],return:{name:"void"}}},description:""},text:{required:!0,tsType:{name:"LocaleType"},description:""}}};try{AddProfilePhotoModal.displayName="AddProfilePhotoModal",AddProfilePhotoModal.__docgenInfo={description:"",displayName:"AddProfilePhotoModal",props:{currentPhoto:{defaultValue:null,description:"",name:"currentPhoto",required:!0,type:{name:"File | null"}},error:{defaultValue:null,description:"",name:"error",required:!0,type:{name:"string"}},isOpenAddPhotoModal:{defaultValue:null,description:"",name:"isOpenAddPhotoModal",required:!0,type:{name:"boolean"}},setCurrentPhoto:{defaultValue:null,description:"",name:"setCurrentPhoto",required:!0,type:{name:"(currentPhoto: File | null) => void"}},setError:{defaultValue:null,description:"",name:"setError",required:!0,type:{name:"(error: string) => void"}},setIsOpenAddPhotoModal:{defaultValue:null,description:"",name:"setIsOpenAddPhotoModal",required:!0,type:{name:"(isOpenAddPhotoModal: boolean) => void"}},text:{defaultValue:null,description:"",name:"text",required:!0,type:{name:"{ calendar: { months: string[]; }; layout: { header: { signInBtn: string; signUpBtn: string; }; navBar: { create: string; favorites: string; home: string; logOut: string; messenger: string; profile: string; search: string; statistics: string; }; tabs: { ...; }; }; modals: { ...; }; pages: { ...; }; timeIntervals: { ..."}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/widgets/AddProfilePhoto/ui/AddProfilePhotoModal/AddProfilePhotoModal.tsx#AddProfilePhotoModal"]={docgenInfo:AddProfilePhotoModal.__docgenInfo,name:"AddProfilePhotoModal",path:"src/widgets/AddProfilePhoto/ui/AddProfilePhotoModal/AddProfilePhotoModal.tsx#AddProfilePhotoModal"})}catch(__react_docgen_typescript_loader_error){}var DeletePhotoModal_module=__webpack_require__("./node_modules/.pnpm/css-loader@6.8.1_webpack@5.89.0/node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[13].use[1]!./node_modules/.pnpm/postcss-loader@7.3.3_postcss@8.4.31_typescript@5.0.2_webpack@5.89.0/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/resolve-url-loader@5.0.0/node_modules/resolve-url-loader/index.js!./node_modules/.pnpm/sass-loader@12.6.0_sass@1.69.5_webpack@5.89.0/node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[13].use[4]!./src/widgets/AddProfilePhoto/ui/DeletePhotoModal/DeletePhotoModal.module.scss"),DeletePhotoModal_module_options={};DeletePhotoModal_module_options.styleTagTransform=styleTagTransform_default(),DeletePhotoModal_module_options.setAttributes=setAttributesWithoutAttributes_default(),DeletePhotoModal_module_options.insert=insertBySelector_default().bind(null,"head"),DeletePhotoModal_module_options.domAPI=styleDomAPI_default(),DeletePhotoModal_module_options.insertStyleElement=insertStyleElement_default();injectStylesIntoStyleTag_default()(DeletePhotoModal_module.Z,DeletePhotoModal_module_options);const DeletePhotoModal_DeletePhotoModal_module=DeletePhotoModal_module.Z&&DeletePhotoModal_module.Z.locals?DeletePhotoModal_module.Z.locals:void 0;var DeletePhotoModal_jsx=react.createElement,DeletePhotoModal=function DeletePhotoModal(_ref){var isOpenDeletePhotoModal=_ref.isOpenDeletePhotoModal,setIsOpenDeletePhotoModal=_ref.setIsOpenDeletePhotoModal,text=_ref.text,_useDeleteAvatarMutat=(0,profileApi.GG)(),deleteAvatar=(0,slicedToArray.Z)(_useDeleteAvatarMutat,1)[0],t=text.pages.profile.addProfilePhoto;return DeletePhotoModal_jsx(ui.u_,{className:DeletePhotoModal_DeletePhotoModal_module.deleteModalRoot,isOpen:isOpenDeletePhotoModal,onIsOpenChange:setIsOpenDeletePhotoModal,title:t.deletePhoto},DeletePhotoModal_jsx("div",{className:DeletePhotoModal_DeletePhotoModal_module.deleteRoot},DeletePhotoModal_jsx(ui.ZT,{variant:"regularText16"},t.deletePhotoQuestion),DeletePhotoModal_jsx("div",{className:DeletePhotoModal_DeletePhotoModal_module.buttonsBlock},DeletePhotoModal_jsx(ui.zx,{fullWidth:!1,onClick:function deletePhoto(){deleteAvatar().unwrap().then((function(){setIsOpenDeletePhotoModal(!1)})).catch((function(error){(0,helpers.fn)(error)&&react_toastify_esm.Am.error(error.data.message)}))},variant:"tertiary"},t.yesButton),DeletePhotoModal_jsx(ui.zx,{fullWidth:!1,onClick:function onClick(){setIsOpenDeletePhotoModal(!1)},variant:"primary"},t.noButton))))};DeletePhotoModal.displayName="DeletePhotoModal",DeletePhotoModal.__docgenInfo={description:"",methods:[],displayName:"DeletePhotoModal",props:{isOpenDeletePhotoModal:{required:!0,tsType:{name:"boolean"},description:""},setIsOpenDeletePhotoModal:{required:!0,tsType:{name:"signature",type:"function",raw:"(isOpenDeletePhotoModal: boolean) => void",signature:{arguments:[{name:"isOpenDeletePhotoModal",type:{name:"boolean"}}],return:{name:"void"}}},description:""},text:{required:!0,tsType:{name:"LocaleType"},description:""}}};try{DeletePhotoModal.displayName="DeletePhotoModal",DeletePhotoModal.__docgenInfo={description:"",displayName:"DeletePhotoModal",props:{isOpenDeletePhotoModal:{defaultValue:null,description:"",name:"isOpenDeletePhotoModal",required:!0,type:{name:"boolean"}},setIsOpenDeletePhotoModal:{defaultValue:null,description:"",name:"setIsOpenDeletePhotoModal",required:!0,type:{name:"(isOpenDeletePhotoModal: boolean) => void"}},text:{defaultValue:null,description:"",name:"text",required:!0,type:{name:"{ calendar: { months: string[]; }; layout: { header: { signInBtn: string; signUpBtn: string; }; navBar: { create: string; favorites: string; home: string; logOut: string; messenger: string; profile: string; search: string; statistics: string; }; tabs: { ...; }; }; modals: { ...; }; pages: { ...; }; timeIntervals: { ..."}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/widgets/AddProfilePhoto/ui/DeletePhotoModal/DeletePhotoModal.tsx#DeletePhotoModal"]={docgenInfo:DeletePhotoModal.__docgenInfo,name:"DeletePhotoModal",path:"src/widgets/AddProfilePhoto/ui/DeletePhotoModal/DeletePhotoModal.tsx#DeletePhotoModal"})}catch(__react_docgen_typescript_loader_error){}var _Default$parameters,_Default$parameters2,AddProfilePhoto_jsx=react.createElement,AddProfilePhoto=function AddProfilePhoto(_ref){var avatar=_ref.avatar,text=(0,hooks.$G)().text,_useState=(0,react.useState)(null),currentPhoto=_useState[0],setCurrentPhoto=_useState[1],_useState2=(0,react.useState)(!1),isOpenAddPhotoModal=_useState2[0],setIsOpenAddPhotoModal=_useState2[1],_useState3=(0,react.useState)(!1),isOpenDeletePhotoModal=_useState3[0],setIsOpenDeletePhotoModal=_useState3[1],_useState4=(0,react.useState)(""),error=_useState4[0],setError=_useState4[1];return AddProfilePhoto_jsx(react.Fragment,null,AddProfilePhoto_jsx("div",{className:ui_AddProfilePhoto_module.root},avatar?AddProfilePhoto_jsx("div",{className:ui_AddProfilePhoto_module.avatar},AddProfilePhoto_jsx(ui.zx,{className:ui_AddProfilePhoto_module.deleteIcon,onClick:function openDeletePhotoModalHandler(){setIsOpenDeletePhotoModal(!0)}},AddProfilePhoto_jsx(DeleteIcon.p,null)),AddProfilePhoto_jsx(ui.qE,{className:ui_AddProfilePhoto_module.avatarPhoto,size:192,src:avatar,userName:"user avatar"})):AddProfilePhoto_jsx(ui.zA,null),AddProfilePhoto_jsx(ui.zx,{onClick:function openAddPhotoModalHandler(){setError(""),setCurrentPhoto(null),setIsOpenAddPhotoModal(!0)},variant:"tertiary"},text.pages.profile.addProfilePhoto.addPhoto)),AddProfilePhoto_jsx(AddProfilePhotoModal,{currentPhoto,error,isOpenAddPhotoModal,setCurrentPhoto,setError,setIsOpenAddPhotoModal,text}),AddProfilePhoto_jsx(DeletePhotoModal,{isOpenDeletePhotoModal,setIsOpenDeletePhotoModal,text}))};AddProfilePhoto.__docgenInfo={description:"",methods:[],displayName:"AddProfilePhoto",props:{avatar:{required:!1,tsType:{name:"union",raw:"null | string",elements:[{name:"null"},{name:"string"}]},description:""}}};try{AddProfilePhoto.displayName="AddProfilePhoto",AddProfilePhoto.__docgenInfo={description:"",displayName:"AddProfilePhoto",props:{avatar:{defaultValue:null,description:"",name:"avatar",required:!1,type:{name:"string | null"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/widgets/AddProfilePhoto/ui/AddProfilePhoto.tsx#AddProfilePhoto"]={docgenInfo:AddProfilePhoto.__docgenInfo,name:"AddProfilePhoto",path:"src/widgets/AddProfilePhoto/ui/AddProfilePhoto.tsx#AddProfilePhoto"})}catch(__react_docgen_typescript_loader_error){}function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){(0,defineProperty.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}const AddProfilePhoto_stories={component:AddProfilePhoto,tags:["autodocs"],title:"Widgets/AddProfilePhoto"};var Default={args:{avatar:""}};Default.parameters=_objectSpread(_objectSpread({},Default.parameters),{},{docs:_objectSpread(_objectSpread({},null===(_Default$parameters=Default.parameters)||void 0===_Default$parameters?void 0:_Default$parameters.docs),{},{source:_objectSpread({originalSource:"{\n  args: {\n    avatar: ''\n  }\n}"},null===(_Default$parameters2=Default.parameters)||void 0===_Default$parameters2||null===(_Default$parameters2=_Default$parameters2.docs)||void 0===_Default$parameters2?void 0:_Default$parameters2.source)})})},"./node_modules/.pnpm/css-loader@6.8.1_webpack@5.89.0/node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[13].use[1]!./node_modules/.pnpm/postcss-loader@7.3.3_postcss@8.4.31_typescript@5.0.2_webpack@5.89.0/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/resolve-url-loader@5.0.0/node_modules/resolve-url-loader/index.js!./node_modules/.pnpm/sass-loader@12.6.0_sass@1.69.5_webpack@5.89.0/node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[13].use[4]!./src/widgets/AddProfilePhoto/ui/AddProfilePhoto.module.scss":(module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _node_modules_pnpm_css_loader_6_8_1_webpack_5_89_0_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/css-loader@6.8.1_webpack@5.89.0/node_modules/css-loader/dist/runtime/sourceMaps.js"),_node_modules_pnpm_css_loader_6_8_1_webpack_5_89_0_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_pnpm_css_loader_6_8_1_webpack_5_89_0_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__),_node_modules_pnpm_css_loader_6_8_1_webpack_5_89_0_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/css-loader@6.8.1_webpack@5.89.0/node_modules/css-loader/dist/runtime/api.js"),___CSS_LOADER_EXPORT___=__webpack_require__.n(_node_modules_pnpm_css_loader_6_8_1_webpack_5_89_0_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__)()(_node_modules_pnpm_css_loader_6_8_1_webpack_5_89_0_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default());___CSS_LOADER_EXPORT___.push([module.id,".AddProfilePhoto_root__8fKpP{display:flex;flex-direction:column;gap:24px;align-items:center;width:100%;max-width:196px;margin-top:24px}.AddProfilePhoto_root__8fKpP .AddProfilePhoto_avatar__sTTdp{position:relative;width:192px;height:192px;border-radius:50%}.AddProfilePhoto_root__8fKpP .AddProfilePhoto_avatar__sTTdp .AddProfilePhoto_avatarPhoto__CVsZY{border-radius:50%}.AddProfilePhoto_root__8fKpP .AddProfilePhoto_avatar__sTTdp .AddProfilePhoto_deleteIcon__ciZcb{position:absolute;top:8px;right:16px;padding:0;background:rgba(0,0,0,0)}","",{version:3,sources:["webpack://./src/widgets/AddProfilePhoto/ui/AddProfilePhoto.module.scss"],names:[],mappings:"AAAA,6BACE,YAAA,CACA,qBAAA,CACA,QAAA,CACA,kBAAA,CAEA,UAAA,CACA,eAAA,CACA,eAAA,CAEA,4DACE,iBAAA,CACA,WAAA,CACA,YAAA,CACA,iBAAA,CAEA,gGACE,iBAAA,CAGF,+FACE,iBAAA,CACA,OAAA,CACA,UAAA,CAEA,SAAA,CAEA,wBAAA",sourcesContent:[".root {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 24px;\r\n  align-items: center;\r\n\r\n  width: 100%;\r\n  max-width: 196px;\r\n  margin-top: 24px;\r\n\r\n  .avatar {\r\n    position: relative;\r\n    width: 192px;\r\n    height: 192px;\r\n    border-radius: 50%;\r\n\r\n    .avatarPhoto {\r\n      border-radius: 50%;\r\n    }\r\n\r\n    .deleteIcon {\r\n      position: absolute;\r\n      top: 8px;\r\n      right: 16px;\r\n\r\n      padding: 0;\r\n\r\n      background: transparent;\r\n    }\r\n  }\r\n}\r\n"],sourceRoot:""}]),___CSS_LOADER_EXPORT___.locals={root:"AddProfilePhoto_root__8fKpP",avatar:"AddProfilePhoto_avatar__sTTdp",avatarPhoto:"AddProfilePhoto_avatarPhoto__CVsZY",deleteIcon:"AddProfilePhoto_deleteIcon__ciZcb"};const __WEBPACK_DEFAULT_EXPORT__=___CSS_LOADER_EXPORT___},"./node_modules/.pnpm/css-loader@6.8.1_webpack@5.89.0/node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[13].use[1]!./node_modules/.pnpm/postcss-loader@7.3.3_postcss@8.4.31_typescript@5.0.2_webpack@5.89.0/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/resolve-url-loader@5.0.0/node_modules/resolve-url-loader/index.js!./node_modules/.pnpm/sass-loader@12.6.0_sass@1.69.5_webpack@5.89.0/node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[13].use[4]!./src/widgets/AddProfilePhoto/ui/AddProfilePhotoModal/AddProfilePhotoModal.module.scss":(module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _node_modules_pnpm_css_loader_6_8_1_webpack_5_89_0_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/css-loader@6.8.1_webpack@5.89.0/node_modules/css-loader/dist/runtime/sourceMaps.js"),_node_modules_pnpm_css_loader_6_8_1_webpack_5_89_0_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_pnpm_css_loader_6_8_1_webpack_5_89_0_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__),_node_modules_pnpm_css_loader_6_8_1_webpack_5_89_0_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/css-loader@6.8.1_webpack@5.89.0/node_modules/css-loader/dist/runtime/api.js"),___CSS_LOADER_EXPORT___=__webpack_require__.n(_node_modules_pnpm_css_loader_6_8_1_webpack_5_89_0_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__)()(_node_modules_pnpm_css_loader_6_8_1_webpack_5_89_0_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default());___CSS_LOADER_EXPORT___.push([module.id,".AddProfilePhotoModal_addModalRoot__Z_EVz{max-width:492px;max-height:564px}.AddProfilePhotoModal_addModalRoot__Z_EVz .AddProfilePhotoModal_modalContent__YG9tn{display:flex;flex-direction:column;align-items:center}.AddProfilePhotoModal_addModalRoot__Z_EVz .AddProfilePhotoModal_modalContent__YG9tn .AddProfilePhotoModal_saveButton__DD0TB{margin:36px 0 12px auto}.AddProfilePhotoModal_addModalRoot__Z_EVz .AddProfilePhotoModal_modalContent__YG9tn .AddProfilePhotoModal_withoutPhoto__PIWaN{display:flex;flex-direction:column;align-items:center;width:100%;margin-bottom:72px}.AddProfilePhotoModal_addModalRoot__Z_EVz .AddProfilePhotoModal_modalContent__YG9tn .AddProfilePhotoModal_withoutPhoto__PIWaN .AddProfilePhotoModal_errorText__yP_Rd{width:100%;height:auto;margin-bottom:24px;padding:6px 44px;text-align:center;background:var(--color-danger-900);border:1px solid var(--color-danger-500);border-radius:2px}.AddProfilePhotoModal_addModalRoot__Z_EVz .AddProfilePhotoModal_modalContent__YG9tn .AddProfilePhotoModal_withoutPhoto__PIWaN .AddProfilePhotoModal_blank__tRORg{margin-top:48px;margin-bottom:60px}.AddProfilePhotoModal_addModalRoot__Z_EVz .AddProfilePhotoModal_modalContent__YG9tn .AddProfilePhotoModal_withoutPhoto__PIWaN .AddProfilePhotoModal_blank__tRORg.AddProfilePhotoModal_blankError__2gqiL{margin-top:0}","",{version:3,sources:["webpack://./src/widgets/AddProfilePhoto/ui/AddProfilePhotoModal/AddProfilePhotoModal.module.scss"],names:[],mappings:"AAAA,0CACE,eAAA,CACA,gBAAA,CAEA,oFACE,YAAA,CACA,qBAAA,CACA,kBAAA,CAEA,4HACE,uBAAA,CAGF,8HACE,YAAA,CACA,qBAAA,CACA,kBAAA,CAEA,UAAA,CACA,kBAAA,CAEA,qKACE,UAAA,CACA,WAAA,CACA,kBAAA,CACA,gBAAA,CAEA,iBAAA,CAEA,kCAAA,CACA,wCAAA,CACA,iBAAA,CAGF,iKACE,eAAA,CACA,kBAAA,CAEA,wMACE,YAAA",sourcesContent:[".addModalRoot {\r\n  max-width: 492px;\r\n  max-height: 564px;\r\n\r\n  .modalContent {\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n\r\n    .saveButton {\r\n      margin: 36px 0 12px auto;\r\n    }\r\n\r\n    .withoutPhoto {\r\n      display: flex;\r\n      flex-direction: column;\r\n      align-items: center;\r\n\r\n      width: 100%;\r\n      margin-bottom: 72px;\r\n\r\n      .errorText {\r\n        width: 100%;\r\n        height: auto;\r\n        margin-bottom: 24px;\r\n        padding: 6px 44px;\r\n\r\n        text-align: center;\r\n\r\n        background: var(--color-danger-900);\r\n        border: 1px solid var(--color-danger-500);\r\n        border-radius: 2px;\r\n      }\r\n\r\n      .blank {\r\n        margin-top: 48px;\r\n        margin-bottom: 60px;\r\n\r\n        &.blankError {\r\n          margin-top: 0;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n"],sourceRoot:""}]),___CSS_LOADER_EXPORT___.locals={addModalRoot:"AddProfilePhotoModal_addModalRoot__Z_EVz",modalContent:"AddProfilePhotoModal_modalContent__YG9tn",saveButton:"AddProfilePhotoModal_saveButton__DD0TB",withoutPhoto:"AddProfilePhotoModal_withoutPhoto__PIWaN",errorText:"AddProfilePhotoModal_errorText__yP_Rd",blank:"AddProfilePhotoModal_blank__tRORg",blankError:"AddProfilePhotoModal_blankError__2gqiL"};const __WEBPACK_DEFAULT_EXPORT__=___CSS_LOADER_EXPORT___},"./node_modules/.pnpm/css-loader@6.8.1_webpack@5.89.0/node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[13].use[1]!./node_modules/.pnpm/postcss-loader@7.3.3_postcss@8.4.31_typescript@5.0.2_webpack@5.89.0/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/resolve-url-loader@5.0.0/node_modules/resolve-url-loader/index.js!./node_modules/.pnpm/sass-loader@12.6.0_sass@1.69.5_webpack@5.89.0/node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[13].use[4]!./src/widgets/AddProfilePhoto/ui/DeletePhotoModal/DeletePhotoModal.module.scss":(module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _node_modules_pnpm_css_loader_6_8_1_webpack_5_89_0_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/css-loader@6.8.1_webpack@5.89.0/node_modules/css-loader/dist/runtime/sourceMaps.js"),_node_modules_pnpm_css_loader_6_8_1_webpack_5_89_0_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_pnpm_css_loader_6_8_1_webpack_5_89_0_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__),_node_modules_pnpm_css_loader_6_8_1_webpack_5_89_0_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/css-loader@6.8.1_webpack@5.89.0/node_modules/css-loader/dist/runtime/api.js"),___CSS_LOADER_EXPORT___=__webpack_require__.n(_node_modules_pnpm_css_loader_6_8_1_webpack_5_89_0_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__)()(_node_modules_pnpm_css_loader_6_8_1_webpack_5_89_0_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default());___CSS_LOADER_EXPORT___.push([module.id,".DeletePhotoModal_deleteModalRoot__ulbjC{max-width:438px;max-height:240px}.DeletePhotoModal_deleteModalRoot__ulbjC .DeletePhotoModal_deleteRoot__Onxpr{display:flex;flex-direction:column;gap:54px;justify-content:flex-start;margin-top:6px}.DeletePhotoModal_deleteModalRoot__ulbjC .DeletePhotoModal_buttonsBlock__j6uJn{display:flex;gap:24px;margin-right:0;margin-bottom:12px;margin-left:auto}.DeletePhotoModal_deleteModalRoot__ulbjC .DeletePhotoModal_buttonsBlock__j6uJn button{width:96px}","",{version:3,sources:["webpack://./src/widgets/AddProfilePhoto/ui/DeletePhotoModal/DeletePhotoModal.module.scss"],names:[],mappings:"AAAA,yCACE,eAAA,CACA,gBAAA,CAEA,6EACE,YAAA,CACA,qBAAA,CACA,QAAA,CACA,0BAAA,CAEA,cAAA,CAGF,+EACE,YAAA,CACA,QAAA,CAEA,cAAA,CACA,kBAAA,CACA,gBAAA,CAEA,sFACE,UAAA",sourcesContent:[".deleteModalRoot {\r\n  max-width: 438px;\r\n  max-height: 240px;\r\n\r\n  .deleteRoot {\r\n    display: flex;\r\n    flex-direction: column;\r\n    gap: 54px;\r\n    justify-content: flex-start;\r\n\r\n    margin-top: 6px;\r\n  }\r\n\r\n  .buttonsBlock {\r\n    display: flex;\r\n    gap: 24px;\r\n\r\n    margin-right: 0;\r\n    margin-bottom: 12px;\r\n    margin-left: auto;\r\n\r\n    button {\r\n      width: 96px;\r\n    }\r\n  }\r\n}\r\n"],sourceRoot:""}]),___CSS_LOADER_EXPORT___.locals={deleteModalRoot:"DeletePhotoModal_deleteModalRoot__ulbjC",deleteRoot:"DeletePhotoModal_deleteRoot__Onxpr",buttonsBlock:"DeletePhotoModal_buttonsBlock__j6uJn"};const __WEBPACK_DEFAULT_EXPORT__=___CSS_LOADER_EXPORT___},"./node_modules/.pnpm/react-avatar-editor@13.0.2_@babel+core@7.23.3_react-dom@18.2.0_react@18.2.0/node_modules/react-avatar-editor/dist/index.js":function(module,__unused_webpack_exports,__webpack_require__){module.exports=function(e,t){"use strict";function o(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=o(e),i=o(t);function r(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e}).apply(this,arguments)}function a(t,e){var o,n=Object.keys(t);return Object.getOwnPropertySymbols&&(o=Object.getOwnPropertySymbols(t),e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)),n}function y(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?a(Object(o),!0).forEach((function(e){s(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):a(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e,t){if(null==e)return{};var o,n=function(e,t){if(null==e)return{};for(var o,n={},a=Object.keys(e),r=0;r<a.length;r++)o=a[r],0<=t.indexOf(o)||(n[o]=e[o]);return n}(e,t);if(Object.getOwnPropertySymbols)for(var a=Object.getOwnPropertySymbols(e),r=0;r<a.length;r++)o=a[r],0<=t.indexOf(o)||Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o]);return n}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(r){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var e,n,a=h(r);return!(n=i?(e=h(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments))||"object"!=typeof n&&"function"!=typeof n?d(this):n}}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var o=[],n=!0,a=!1,r=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done)&&(o.push(i.value),!t||o.length!==t);n=!0);}catch(e){a=!0,r=e}finally{try{n||null==s.return||s.return()}finally{if(a)throw r}}return o}}(e,t)||g(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){if(e){if("string"==typeof e)return f(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?f(e,t):void 0}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=new Array(t);o<t;o++)n[o]=e[o];return n}function v(a,r){return new Promise((function(e,t){var o,n=new Image;n.onload=function(){return e(n)},n.onerror=t,0==(null!==(o=a)&&!!o.match(/^\s*data:([a-z]+\/[a-z]+(;[a-z-]+=[a-z-]+)?)?(;base64)?,[a-z0-9!$&',()*+;=\-._~:@/?%\s]*\s*$/i))&&r&&(n.crossOrigin=r),n.src=a}))}var b,w=!("undefined"==typeof window||"undefined"==typeof navigator||!("ontouchstart"in window||0<navigator.msMaxTouchPoints)),M="undefined"!=typeof File,O={touch:{react:{down:"onTouchStart",mouseDown:"onMouseDown",drag:"onTouchMove",move:"onTouchMove",mouseMove:"onMouseMove",up:"onTouchEnd",mouseUp:"onMouseUp"},native:{down:"touchstart",mouseDown:"mousedown",drag:"touchmove",move:"touchmove",mouseMove:"mousemove",up:"touchend",mouseUp:"mouseup"}},desktop:{react:{down:"onMouseDown",drag:"onDragOver",move:"onMouseMove",up:"onMouseUp"},native:{down:"mousedown",drag:"dragStart",move:"mousemove",up:"mouseup"}}},I=w?O.touch:O.desktop,P="undefined"!=typeof window&&window.devicePixelRatio?window.devicePixelRatio:1,C={x:.5,y:.5},x=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(a,i.default.Component);var e,t,o,n=p(a);function a(e){var v;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),s(d(v=n.call(this,e)),"state",{drag:!1,my:null,mx:null,image:C}),s(d(v),"handleImageReady",(function(e){var t=v.getInitialSize(e.width,e.height);t.resource=e,t.x=.5,t.y=.5,t.backgroundColor=v.props.backgroundColor,v.setState({drag:!1,image:t},v.props.onImageReady),v.props.onLoadSuccess(t)})),s(d(v),"clearImage",(function(){v.canvas.getContext("2d").clearRect(0,0,v.canvas.width,v.canvas.height),v.setState({image:C})})),s(d(v),"handleMouseDown",(function(e){(e=e||window.event).preventDefault(),v.setState({drag:!0,mx:null,my:null})})),s(d(v),"handleMouseUp",(function(){v.state.drag&&(v.setState({drag:!1}),v.props.onMouseUp())})),s(d(v),"handleMouseMove",(function(e){var t,o,n,a,r,i,s,u,h,c,l,d,p,g,f,m;e=e||window.event,!1!==v.state.drag&&(e.preventDefault(),n={mx:t=e.targetTouches?e.targetTouches[0].pageX:e.clientX,my:o=e.targetTouches?e.targetTouches[0].pageY:e.clientY},m=v.props.rotate,m=(m%=360)<0?m+360:m,v.state.mx&&v.state.my&&(a=v.state.mx-t,r=v.state.my-o,i=v.state.image.width*v.props.scale,s=v.state.image.height*v.props.scale,h=(u=v.getCroppingRect()).x,c=u.y,h*=i,c*=s,l=function(e){return e*(Math.PI/180)},d=Math.cos(l(m)),g=c+-a*(p=Math.sin(l(m)))+r*d,f={x:(h+a*d+r*p)/i+1/v.props.scale*v.getXScale()/2,y:g/s+1/v.props.scale*v.getYScale()/2},v.props.onPositionChange(f),n.image=y(y({},v.state.image),f)),v.setState(n),v.props.onMouseMove(e))})),s(d(v),"setCanvas",(function(e){v.canvas=e})),v.canvas=null,v}return e=a,(t=[{key:"componentDidMount",value:function(){this.props.disableHiDPIScaling&&(P=1);var e,t,o=this.canvas.getContext("2d");this.props.image&&this.loadImage(this.props.image),this.paint(o),document&&(e=!!function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("test",e,e),window.removeEventListener("test",e,e)}catch(e){t=!1}return t}()&&{passive:!1},t=I.native,document.addEventListener(t.move,this.handleMouseMove,e),document.addEventListener(t.up,this.handleMouseUp,e),w&&(document.addEventListener(t.mouseMove,this.handleMouseMove,e),document.addEventListener(t.mouseUp,this.handleMouseUp,e)))}},{key:"componentDidUpdate",value:function(e,t){this.props.image&&this.props.image!==e.image||this.props.width!==e.width||this.props.height!==e.height||this.props.backgroundColor!==e.backgroundColor?this.loadImage(this.props.image):this.props.image||t.image===C||this.clearImage();var o=this.canvas.getContext("2d");o.clearRect(0,0,this.canvas.width,this.canvas.height),this.paint(o),this.paintImage(o,this.state.image,this.props.border),e.image===this.props.image&&e.width===this.props.width&&e.height===this.props.height&&e.position===this.props.position&&e.scale===this.props.scale&&e.rotate===this.props.rotate&&t.my===this.state.my&&t.mx===this.state.mx&&t.image.x===this.state.image.x&&t.image.y===this.state.image.y&&t.backgroundColor===this.state.backgroundColor||this.props.onImageChange()}},{key:"componentWillUnmount",value:function(){var e;document&&(e=I.native,document.removeEventListener(e.move,this.handleMouseMove,!1),document.removeEventListener(e.up,this.handleMouseUp,!1),w&&(document.removeEventListener(e.mouseMove,this.handleMouseMove,!1),document.removeEventListener(e.mouseUp,this.handleMouseUp,!1)))}},{key:"isVertical",value:function(){return!this.props.disableCanvasRotation&&this.props.rotate%180!=0}},{key:"getBorders",value:function(e){var t=0<arguments.length&&void 0!==e?e:this.props.border;return Array.isArray(t)?t:[t,t]}},{key:"getDimensions",value:function(){var e=this.props,t=e.width,o=e.height,n=e.rotate,a=e.border,r={},i=m(this.getBorders(a),2),s=i[0],u=i[1],h=t,c=o;return this.isVertical()?(r.width=c,r.height=h):(r.width=h,r.height=c),r.width+=2*s,r.height+=2*u,{canvas:r,rotate:n,width:t,height:o,border:a}}},{key:"getImage",value:function(){var e=this.getCroppingRect(),t=this.state.image;e.x*=t.resource.width,e.y*=t.resource.height,e.width*=t.resource.width,e.height*=t.resource.height;var o=document.createElement("canvas");this.isVertical()?(o.width=e.height,o.height=e.width):(o.width=e.width,o.height=e.height);var n=o.getContext("2d");return n.translate(o.width/2,o.height/2),n.rotate(this.props.rotate*Math.PI/180),n.translate(-o.width/2,-o.height/2),this.isVertical()&&n.translate((o.width-o.height)/2,(o.height-o.width)/2),t.backgroundColor&&(n.fillStyle=t.backgroundColor,n.fillRect(-e.x,-e.y,t.resource.width,t.resource.height)),n.drawImage(t.resource,-e.x,-e.y),o}},{key:"getImageScaledToCanvas",value:function(){var e=this.getDimensions(),t=e.width,o=e.height,n=document.createElement("canvas");return this.isVertical()?(n.width=o,n.height=t):(n.width=t,n.height=o),this.paintImage(n.getContext("2d"),this.state.image,0,1),n}},{key:"getXScale",value:function(){var e=this.props.width/this.props.height,t=this.state.image.width/this.state.image.height;return Math.min(1,e/t)}},{key:"getYScale",value:function(){var e=this.props.height/this.props.width,t=this.state.image.height/this.state.image.width;return Math.min(1,e/t)}},{key:"getCroppingRect",value:function(){var e=this.props.position||{x:this.state.image.x,y:this.state.image.y},t=1/this.props.scale*this.getXScale(),o=1/this.props.scale*this.getYScale(),n={x:e.x-t/2,y:e.y-o/2,width:t,height:o},a=0,r=1-n.width,i=0,s=1-n.height;return(this.props.disableBoundaryChecks||1<t||1<o)&&(a=-n.width,i=-n.height,s=r=1),y(y({},n),{},{x:Math.max(a,Math.min(n.x,r)),y:Math.max(i,Math.min(n.y,s))})}},{key:"loadImage",value:function(e){var t;M&&e instanceof File?this.loadingImage=(t=e,new Promise((function(o,n){var e=new FileReader;e.onload=function(e){try{var t=v(e.target.result);o(t)}catch(e){n(e)}},e.readAsDataURL(t)})).then(this.handleImageReady).catch(this.props.onLoadFailure)):"string"==typeof e&&(this.loadingImage=v(e,this.props.crossOrigin).then(this.handleImageReady).catch(this.props.onLoadFailure))}},{key:"getInitialSize",value:function(e,t){var o,n,a=this.getDimensions();return t/e<a.height/a.width?n=e*((o=this.getDimensions().height)/t):o=t*((n=this.getDimensions().width)/e),{height:o,width:n}}},{key:"paintImage",value:function(e,t,o,n){var a,r=3<arguments.length&&void 0!==n?n:P;t.resource&&(a=this.calculatePosition(t,o),e.save(),e.translate(e.canvas.width/2,e.canvas.height/2),e.rotate(this.props.rotate*Math.PI/180),e.translate(-e.canvas.width/2,-e.canvas.height/2),this.isVertical()&&e.translate((e.canvas.width-e.canvas.height)/2,(e.canvas.height-e.canvas.width)/2),e.scale(r,r),e.globalCompositeOperation="destination-over",e.drawImage(t.resource,a.x,a.y,a.width,a.height),t.backgroundColor&&(e.fillStyle=t.backgroundColor,e.fillRect(a.x,a.y,a.width,a.height)),e.restore())}},{key:"calculatePosition",value:function(e,t){e=e||this.state.image;var o=m(this.getBorders(t),2),n=o[0],a=o[1],r=this.getCroppingRect(),i=e.width*this.props.scale,s=e.height*this.props.scale,u=-r.x*i,h=-r.y*s;return this.isVertical()?(u+=a,h+=n):(u+=n,h+=a),{x:u,y:h,height:s,width:i}}},{key:"paint",value:function(e){e.save(),e.scale(P,P),e.translate(0,0),e.fillStyle="rgba("+this.props.color.slice(0,4).join(",")+")";var t,o,n,a,r,i,s,u,h=this.props.borderRadius,c=this.getDimensions(),l=m(this.getBorders(c.border),2),d=l[0],p=l[1],g=c.canvas.height,f=c.canvas.width;h=Math.max(h,0),h=Math.min(h,f/2-d,g/2-p),e.beginPath(),t=e,a=f-2*(o=d),r=g-2*(n=p),0===(i=h)?t.rect(o,n,a,r):(s=a-i,u=r-i,t.translate(o,n),t.arc(i,i,i,Math.PI,1.5*Math.PI),t.lineTo(s,0),t.arc(s,i,i,1.5*Math.PI,2*Math.PI),t.lineTo(a,u),t.arc(s,u,i,2*Math.PI,.5*Math.PI),t.lineTo(i,r),t.arc(i,u,i,.5*Math.PI,Math.PI),t.translate(-o,-n)),e.rect(f,0,-f,g),e.fill("evenodd"),e.restore()}},{key:"render",value:function(){var e=this.props,t=(e.scale,e.rotate,e.image,e.border,e.borderRadius,e.width,e.height,e.position,e.color,e.backgroundColor,e.style),o=(e.crossOrigin,e.onLoadFailure,e.onLoadSuccess,e.onImageReady,e.onImageChange,e.onMouseUp,e.onMouseMove,e.onPositionChange,e.disableBoundaryChecks,e.disableHiDPIScaling,e.disableCanvasRotation,l(e,["scale","rotate","image","border","borderRadius","width","height","position","color","backgroundColor","style","crossOrigin","onLoadFailure","onLoadSuccess","onImageReady","onImageChange","onMouseUp","onMouseMove","onPositionChange","disableBoundaryChecks","disableHiDPIScaling","disableCanvasRotation"])),n=this.getDimensions(),a={width:n.canvas.width,height:n.canvas.height,cursor:this.state.drag?"grabbing":"grab",touchAction:"none"},r={width:n.canvas.width*P,height:n.canvas.height*P,style:y(y({},a),t)};return r[I.react.down]=this.handleMouseDown,w&&(r[I.react.mouseDown]=this.handleMouseDown),i.default.createElement("canvas",u({ref:this.setCanvas},r,o))}}])&&r(e.prototype,t),o&&r(e,o),a}();return s(x,"propTypes",{scale:n.default.number,rotate:n.default.number,image:n.default.oneOfType([n.default.string].concat(function(e){if(Array.isArray(e))return f(e)}(b=M?[n.default.instanceOf(File)]:[])||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(b)||g(b)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())),border:n.default.oneOfType([n.default.number,n.default.arrayOf(n.default.number)]),borderRadius:n.default.number,width:n.default.number,height:n.default.number,position:n.default.shape({x:n.default.number,y:n.default.number}),color:n.default.arrayOf(n.default.number),backgroundColor:n.default.string,crossOrigin:n.default.oneOf(["","anonymous","use-credentials"]),onLoadFailure:n.default.func,onLoadSuccess:n.default.func,onImageReady:n.default.func,onImageChange:n.default.func,onMouseUp:n.default.func,onMouseMove:n.default.func,onPositionChange:n.default.func,disableBoundaryChecks:n.default.bool,disableHiDPIScaling:n.default.bool,disableCanvasRotation:n.default.bool}),s(x,"defaultProps",{scale:1,rotate:0,border:25,borderRadius:0,width:200,height:200,color:[0,0,0,.5],onLoadFailure:function(){},onLoadSuccess:function(){},onImageReady:function(){},onImageChange:function(){},onMouseUp:function(){},onMouseMove:function(){},onPositionChange:function(){},disableBoundaryChecks:!1,disableHiDPIScaling:!1,disableCanvasRotation:!0}),x}(__webpack_require__("./node_modules/.pnpm/prop-types@15.8.1/node_modules/prop-types/index.js"),__webpack_require__("./node_modules/.pnpm/next@14.0.1_@babel+core@7.23.3_react-dom@18.2.0_react@18.2.0_sass@1.69.5/node_modules/next/dist/compiled/react/index.js"))}}]);