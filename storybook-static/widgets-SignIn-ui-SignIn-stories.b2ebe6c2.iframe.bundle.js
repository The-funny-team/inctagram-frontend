"use strict";(self.webpackChunkinctagram=self.webpackChunkinctagram||[]).push([[5402],{"./src/widgets/SignIn/ui/SignIn.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{SignInStory:()=>SignInStory,default:()=>SignIn_stories});var defineProperty=__webpack_require__("./node_modules/.pnpm/@babel+runtime@7.23.2/node_modules/@babel/runtime/helpers/esm/defineProperty.js"),esm_extends=__webpack_require__("./node_modules/.pnpm/@babel+runtime@7.23.2/node_modules/@babel/runtime/helpers/esm/extends.js"),slicedToArray=__webpack_require__("./node_modules/.pnpm/@babel+runtime@7.23.2/node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),react=__webpack_require__("./node_modules/.pnpm/next@14.0.1_@babel+core@7.23.3_react-dom@18.2.0_react@18.2.0_sass@1.69.5/node_modules/next/dist/compiled/react/index.js"),index_esm=__webpack_require__("./node_modules/.pnpm/react-hook-form@7.48.2_react@18.2.0/node_modules/react-hook-form/dist/index.esm.mjs"),authApi=__webpack_require__("./src/shared/api/authApi/index.ts"),assets=__webpack_require__("./src/shared/assets/index.ts"),shared_const=__webpack_require__("./src/shared/const/index.ts"),hooks=__webpack_require__("./src/shared/lib/hooks/index.ts"),ui=__webpack_require__("./src/shared/ui/index.ts"),clsx=__webpack_require__("./node_modules/.pnpm/clsx@2.0.0/node_modules/clsx/dist/clsx.mjs"),next_link=__webpack_require__("./node_modules/.pnpm/next@14.0.1_@babel+core@7.23.3_react-dom@18.2.0_react@18.2.0_sass@1.69.5/node_modules/next/link.js"),link_default=__webpack_require__.n(next_link),helpers=__webpack_require__("./src/shared/lib/helpers/index.ts"),injectStylesIntoStyleTag=__webpack_require__("./node_modules/.pnpm/style-loader@3.3.3_webpack@5.89.0/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),styleDomAPI=__webpack_require__("./node_modules/.pnpm/style-loader@3.3.3_webpack@5.89.0/node_modules/style-loader/dist/runtime/styleDomAPI.js"),styleDomAPI_default=__webpack_require__.n(styleDomAPI),insertBySelector=__webpack_require__("./node_modules/.pnpm/style-loader@3.3.3_webpack@5.89.0/node_modules/style-loader/dist/runtime/insertBySelector.js"),insertBySelector_default=__webpack_require__.n(insertBySelector),setAttributesWithoutAttributes=__webpack_require__("./node_modules/.pnpm/style-loader@3.3.3_webpack@5.89.0/node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),setAttributesWithoutAttributes_default=__webpack_require__.n(setAttributesWithoutAttributes),insertStyleElement=__webpack_require__("./node_modules/.pnpm/style-loader@3.3.3_webpack@5.89.0/node_modules/style-loader/dist/runtime/insertStyleElement.js"),insertStyleElement_default=__webpack_require__.n(insertStyleElement),styleTagTransform=__webpack_require__("./node_modules/.pnpm/style-loader@3.3.3_webpack@5.89.0/node_modules/style-loader/dist/runtime/styleTagTransform.js"),styleTagTransform_default=__webpack_require__.n(styleTagTransform),SignIn_module=__webpack_require__("./node_modules/.pnpm/css-loader@6.8.1_webpack@5.89.0/node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[13].use[1]!./node_modules/.pnpm/postcss-loader@7.3.3_postcss@8.4.31_typescript@5.0.2_webpack@5.89.0/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/resolve-url-loader@5.0.0/node_modules/resolve-url-loader/index.js!./node_modules/.pnpm/sass-loader@12.6.0_sass@1.69.5_webpack@5.89.0/node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[13].use[4]!./src/widgets/SignIn/ui/SignIn.module.scss"),options={};options.styleTagTransform=styleTagTransform_default(),options.setAttributes=setAttributesWithoutAttributes_default(),options.insert=insertBySelector_default().bind(null,"head"),options.domAPI=styleDomAPI_default(),options.insertStyleElement=insertStyleElement_default();injectStylesIntoStyleTag_default()(SignIn_module.Z,options);const ui_SignIn_module=SignIn_module.Z&&SignIn_module.Z.locals?SignIn_module.Z.locals:void 0;var _SignInStory$paramete,_SignInStory$paramete2,zod=__webpack_require__("./node_modules/.pnpm/@hookform+resolvers@3.3.2_react-hook-form@7.48.2/node_modules/@hookform/resolvers/zod/dist/zod.mjs"),lib=__webpack_require__("./node_modules/.pnpm/zod@3.22.4/node_modules/zod/lib/index.mjs"),signInSchema=function signInSchema(t){return lib.z.object({email:lib.z.string().email({message:t.emailVerification}).trim(),password:lib.z.string().min(6,t.minLength6).max(20,t.maxLength20).regex(shared_const.mS,t.passwordVerification).trim()})},__jsx=react.createElement,SignIn=function SignIn(){var _useSignInMutation=(0,authApi.uf)(),_useSignInMutation2=(0,slicedToArray.Z)(_useSignInMutation,2),signIn=_useSignInMutation2[0],isLoading=_useSignInMutation2[1].isLoading,_useTranslation=(0,hooks.$G)(),router=_useTranslation.router,text=_useTranslation.text,t=text.pages.signIn,_useSignIn=function useSignIn(t){return(0,index_esm.cI)({defaultValues:{email:"",password:""},mode:"onTouched",resolver:(0,zod.F)(signInSchema(t))})}(text.validation),control=_useSignIn.control,isValid=_useSignIn.formState.isValid,handleSubmit=_useSignIn.handleSubmit,setError=_useSignIn.setError,classNames={forgotLink:ui_SignIn_module.forgotLink,form:ui_SignIn_module.form,formInput:function formInput(error){return(0,clsx.W)(ui_SignIn_module.formInput,error&&ui_SignIn_module.formInputWithError)},formTitle:ui_SignIn_module.formTitle,providers:ui_SignIn_module.providers,questionText:ui_SignIn_module.questionText,root:ui_SignIn_module.root,signUpLink:ui_SignIn_module.signUpLink};return __jsx(ui.Zb,{className:classNames.root},__jsx(ui.ZT,{as:"h1",className:classNames.formTitle,variant:"h1"},t.formTitle),__jsx("div",{className:classNames.providers},__jsx("button",{onClick:function loginByGoogle(){window.location.assign(shared_const.CB)}},__jsx(assets._8,null)),__jsx(link_default(),{href:"https://github.com/login/oauth/authorize",target:"_blank"},__jsx(assets.ET,null))),__jsx("form",{className:classNames.form,onSubmit:handleSubmit((function onFormSubmit(data){signIn(data).unwrap().then((function(){router.push(shared_const.iJ.PROFILE)})).catch((function(error){return(0,helpers.gX)(error,setError,"password")}))}))},__jsx(index_esm.Qr,{control,name:"email",render:function render(_ref){var field=_ref.field,error=_ref.fieldState.error;return __jsx(ui.II,(0,esm_extends.Z)({className:classNames.formInput(null==error?void 0:error.message),error:null==error?void 0:error.message,label:t.emailLabel,placeholder:"Epam@epam.com",type:"text"},field))}}),__jsx(index_esm.Qr,{control,name:"password",render:function render(_ref2){var field=_ref2.field,error=_ref2.fieldState.error;return __jsx(ui.II,(0,esm_extends.Z)({autoComplete:"off",className:classNames.formInput(null==error?void 0:error.message),error:null==error?void 0:error.message,label:t.passwordLabel,type:"password"},field))}}),__jsx(ui.ZT,{as:link_default(),className:classNames.forgotLink,href:shared_const.iJ.FORGOT_PASSWORD,variant:"regularText14"},t.forgotPasswordLink),__jsx(ui.zx,{disabled:!isValid||isLoading,type:"submit"},t.signInBtn)),__jsx(ui.ZT,{className:classNames.questionText,variant:"regularText16"},t.questionAboutAccount),__jsx(ui.zx,{as:link_default(),className:classNames.signUpLink,href:shared_const.iJ.SIGN_UP,variant:"link"},t.signUpLink))};function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){(0,defineProperty.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}SignIn.displayName="SignIn",SignIn.__docgenInfo={description:"",methods:[],displayName:"SignIn"};const SignIn_stories={component:SignIn,tags:["autodocs"],title:"Widgets/SignIn"};var SignInStory={};SignInStory.parameters=_objectSpread(_objectSpread({},SignInStory.parameters),{},{docs:_objectSpread(_objectSpread({},null===(_SignInStory$paramete=SignInStory.parameters)||void 0===_SignInStory$paramete?void 0:_SignInStory$paramete.docs),{},{source:_objectSpread({originalSource:"{}"},null===(_SignInStory$paramete2=SignInStory.parameters)||void 0===_SignInStory$paramete2||null===(_SignInStory$paramete2=_SignInStory$paramete2.docs)||void 0===_SignInStory$paramete2?void 0:_SignInStory$paramete2.source)})})},"./src/shared/api/authApi/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{VN:()=>useCreateNewPasswordMutation,_y:()=>useLogoutMutation,SA:()=>usePasswordRecoveryMutation,uf:()=>useSignInMutation,OE:()=>useSignUpMutation});var asyncToGenerator=__webpack_require__("./node_modules/.pnpm/@babel+runtime@7.23.2/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),regenerator=__webpack_require__("./node_modules/.pnpm/@babel+runtime@7.23.2/node_modules/@babel/runtime/regenerator/index.js"),regenerator_default=__webpack_require__.n(regenerator),baseApi=__webpack_require__("./src/shared/api/baseApi/index.ts"),profileApi=__webpack_require__("./src/shared/api/profileApi/index.ts"),shared_const=__webpack_require__("./src/shared/const/index.ts"),helpers=__webpack_require__("./src/shared/lib/helpers/index.ts"),authApi=baseApi.u.injectEndpoints({endpoints:function endpoints(builder){return{createNewPassword:builder.mutation({query:function query(body){return{body,method:"POST",url:"/auth/new-password"}}}),emailConfirmation:builder.mutation({query:function query(body){return{body,method:"POST",url:"/auth/registration-confirmation"}}}),emailResending:builder.mutation({query:function query(body){return{body,method:"POST",url:"/auth/registration-email-resending"}}}),loginByGoogle:builder.query({query:function query(_ref){return{method:"GET",params:{code:_ref.code},url:"auth/google"}}}),logout:builder.mutation({invalidatesTags:["Me"],onQueryStarted:function onQueryStarted(_,_ref2){return(0,asyncToGenerator.Z)(regenerator_default().mark((function _callee(){var dispatch,queryFulfilled,patchResult;return regenerator_default().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return dispatch=_ref2.dispatch,queryFulfilled=_ref2.queryFulfilled,patchResult=dispatch(profileApi.c_.util.updateQueryData("me",void 0,(function(){return null}))),localStorage.removeItem("accessToken"),_context.prev=3,_context.next=6,queryFulfilled;case 6:_context.next=11;break;case 8:_context.prev=8,_context.t0=_context.catch(3),patchResult.undo();case 11:case"end":return _context.stop()}}),_callee,null,[[3,8]])})))()},query:function query(){return{method:"POST",url:"/auth/logout"}}}),passwordRecovery:builder.mutation({query:function query(body){return{body,method:"POST",url:"/auth/password-recovery"}}}),passwordRecoveryResending:builder.mutation({query:function query(body){return{body,method:"POST",url:"/auth/password-recovery-resending"}}}),signIn:builder.mutation({invalidatesTags:["Me"],onQueryStarted:function onQueryStarted(_,_ref3){return(0,asyncToGenerator.Z)(regenerator_default().mark((function _callee2(){var queryFulfilled,_yield$queryFulfilled,data;return regenerator_default().wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return queryFulfilled=_ref3.queryFulfilled,_context2.prev=1,_context2.next=4,queryFulfilled;case 4:_yield$queryFulfilled=_context2.sent,data=_yield$queryFulfilled.data,(0,helpers.m8)(shared_const.LA,data.accessToken),_context2.next=12;break;case 9:_context2.prev=9,_context2.t0=_context2.catch(1),localStorage.removeItem(shared_const.LA);case 12:case"end":return _context2.stop()}}),_callee2,null,[[1,9]])})))()},query:function query(body){return{body,method:"POST",url:"/auth/login"}}}),signUp:builder.mutation({query:function query(body){return{body,method:"POST",url:"/auth/registration"}}})}}}),useCreateNewPasswordMutation=authApi.useCreateNewPasswordMutation,useLogoutMutation=(authApi.useEmailConfirmationMutation,authApi.useEmailResendingMutation,authApi.useLoginByGoogleQuery,authApi.useLogoutMutation),usePasswordRecoveryMutation=authApi.usePasswordRecoveryMutation,useSignInMutation=(authApi.usePasswordRecoveryResendingMutation,authApi.useSignInMutation),useSignUpMutation=authApi.useSignUpMutation},"./node_modules/.pnpm/css-loader@6.8.1_webpack@5.89.0/node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[13].use[1]!./node_modules/.pnpm/postcss-loader@7.3.3_postcss@8.4.31_typescript@5.0.2_webpack@5.89.0/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/resolve-url-loader@5.0.0/node_modules/resolve-url-loader/index.js!./node_modules/.pnpm/sass-loader@12.6.0_sass@1.69.5_webpack@5.89.0/node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[13].use[4]!./src/widgets/SignIn/ui/SignIn.module.scss":(module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _node_modules_pnpm_css_loader_6_8_1_webpack_5_89_0_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/css-loader@6.8.1_webpack@5.89.0/node_modules/css-loader/dist/runtime/sourceMaps.js"),_node_modules_pnpm_css_loader_6_8_1_webpack_5_89_0_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_pnpm_css_loader_6_8_1_webpack_5_89_0_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__),_node_modules_pnpm_css_loader_6_8_1_webpack_5_89_0_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/css-loader@6.8.1_webpack@5.89.0/node_modules/css-loader/dist/runtime/api.js"),___CSS_LOADER_EXPORT___=__webpack_require__.n(_node_modules_pnpm_css_loader_6_8_1_webpack_5_89_0_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__)()(_node_modules_pnpm_css_loader_6_8_1_webpack_5_89_0_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default());___CSS_LOADER_EXPORT___.push([module.id,".SignIn_root__4VyIG{display:flex;flex-flow:column nowrap;flex-wrap:nowrap;gap:0;align-items:stretch;justify-content:flex-start;width:378px;padding:24px}.SignIn_formTitle__yBbAR{margin-bottom:13px;text-align:center}.SignIn_providers__PrGAs{display:flex;flex-flow:row nowrap;flex-wrap:nowrap;gap:60px;align-items:stretch;justify-content:center;margin-bottom:24px}.SignIn_providers__PrGAs button{cursor:pointer;background-color:rgba(0,0,0,0);border:none}.SignIn_form__j_hKl{display:flex;flex-flow:column nowrap;flex-wrap:nowrap;gap:0;align-items:stretch;justify-content:flex-start;margin-bottom:18px}.SignIn_formInput__W6_fl{width:100%;background-color:rgba(0,0,0,0)}.SignIn_formInput__W6_fl input:-webkit-autofill,.SignIn_formInput__W6_fl input:-webkit-autofill:hover,.SignIn_formInput__W6_fl input:-webkit-autofill:focus,.SignIn_formInput__W6_fl input:-webkit-autofill:active{box-shadow:0 0 0 30px var(--color-dark-500) inset !important;-webkit-text-fill-color:var(--color-light-900) !important}.SignIn_formInput__W6_fl:first-child{margin-bottom:24px}.SignIn_formInput__W6_fl:last-of-type{margin-bottom:36px}.SignIn_formInput__W6_fl.SignIn_formInputWithError___hWgq:first-child{margin-bottom:0}.SignIn_formInput__W6_fl.SignIn_formInputWithError___hWgq:last-of-type{margin-bottom:12px}.SignIn_forgotLink__KMEEv{margin-bottom:24px;color:var(--color-light-900);text-align:right;text-decoration:none}.SignIn_questionText__p5iGu{margin-bottom:6px;text-align:center}.SignIn_signUpLink__dl8rY{transition:color .2s ease}.SignIn_signUpLink__dl8rY:hover{color:var(--color-accent-100)}","",{version:3,sources:["webpack://./src/widgets/SignIn/ui/SignIn.module.scss"],names:[],mappings:"AASA,oBARE,YAAA,CACA,uBAAA,CACA,gBAHkF,CAIlF,KAJwE,CAKxE,mBALyD,CAMzD,0BANqC,CAYrC,WAAA,CACA,YAAA,CAGF,yBACE,kBAAA,CACA,iBAAA,CAGF,yBApBE,YAAA,CACA,oBAAA,CACA,gBAHkF,CAIlF,QAkBoB,CAjBpB,mBALyD,CAMzD,sBAgBoC,CAEpC,kBAAA,CAEA,gCACE,cAAA,CACA,8BAAA,CACA,WAAA,CAIJ,oBAhCE,YAAA,CACA,uBAAA,CACA,gBAHkF,CAIlF,KAJwE,CAKxE,mBALyD,CAMzD,0BANqC,CAoCrC,kBAAA,CAGF,yBACE,UAAA,CACA,8BAAA,CAEA,mNAIE,4DAAA,CAEA,yDAAA,CAGF,qCACE,kBAAA,CAGF,sCACE,kBAAA,CAKF,sEACE,eAAA,CAGF,uEACE,kBAAA,CAIJ,0BACE,kBAAA,CACA,4BAAA,CACA,gBAAA,CACA,oBAAA,CAGF,4BACE,iBAAA,CACA,iBAAA,CAGF,0BACE,yBAAA,CAEA,gCACE,6BAAA",sourcesContent:["@mixin flex($direction: row, $justify: flex-start, $align: stretch, $gap: 0, $wrap: nowrap) {\r\n  display: flex;\r\n  flex-flow: $direction $wrap;\r\n  flex-wrap: $wrap;\r\n  gap: $gap;\r\n  align-items: $align;\r\n  justify-content: $justify;\r\n}\r\n\r\n.root {\r\n  @include flex($direction: column);\r\n\r\n  width: 378px;\r\n  padding: 24px;\r\n}\r\n\r\n.formTitle {\r\n  margin-bottom: 13px;\r\n  text-align: center;\r\n}\r\n\r\n.providers {\r\n  @include flex($gap: 60px, $justify: center);\r\n\r\n  margin-bottom: 24px;\r\n\r\n  & button {\r\n    cursor: pointer;\r\n    background-color: transparent;\r\n    border: none;\r\n  }\r\n}\r\n\r\n.form {\r\n  @include flex($direction: column);\r\n\r\n  margin-bottom: 18px;\r\n}\r\n\r\n.formInput {\r\n  width: 100%;\r\n  background-color: transparent;\r\n\r\n  input:-webkit-autofill,\r\n  input:-webkit-autofill:hover,\r\n  input:-webkit-autofill:focus,\r\n  input:-webkit-autofill:active {\r\n    box-shadow: 0 0 0 30px var(--color-dark-500) inset !important;\r\n\r\n    -webkit-text-fill-color: var(--color-light-900) !important;\r\n  }\r\n\r\n  &:first-child {\r\n    margin-bottom: 24px;\r\n  }\r\n\r\n  &:last-of-type {\r\n    margin-bottom: 36px;\r\n  }\r\n}\r\n\r\n.formInput.formInputWithError {\r\n  &:first-child {\r\n    margin-bottom: 0;\r\n  }\r\n\r\n  &:last-of-type {\r\n    margin-bottom: 12px;\r\n  }\r\n}\r\n\r\n.forgotLink {\r\n  margin-bottom: 24px;\r\n  color: var(--color-light-900);\r\n  text-align: right;\r\n  text-decoration: none;\r\n}\r\n\r\n.questionText {\r\n  margin-bottom: 6px;\r\n  text-align: center;\r\n}\r\n\r\n.signUpLink {\r\n  transition: color 0.2s ease;\r\n\r\n  &:hover {\r\n    color: var(--color-accent-100);\r\n  }\r\n}\r\n"],sourceRoot:""}]),___CSS_LOADER_EXPORT___.locals={root:"SignIn_root__4VyIG",formTitle:"SignIn_formTitle__yBbAR",providers:"SignIn_providers__PrGAs",form:"SignIn_form__j_hKl",formInput:"SignIn_formInput__W6_fl",formInputWithError:"SignIn_formInputWithError___hWgq",forgotLink:"SignIn_forgotLink__KMEEv",questionText:"SignIn_questionText__p5iGu",signUpLink:"SignIn_signUpLink__dl8rY"};const __WEBPACK_DEFAULT_EXPORT__=___CSS_LOADER_EXPORT___}}]);